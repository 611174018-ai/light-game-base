<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>å…¨é–‹ç‡ˆéŠæˆ² - é»ç‡ˆæ³¡å³é–‹é—œ</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 20px; }
    .bulbs { display: flex; justify-content: center; margin-bottom: 20px; }
    .bulb {
      width: 40px; height: 40px; margin: 5px;
      border-radius: 50%; background-color: gray;
      transition: background-color 0.3s;
      cursor: pointer;
    }
    .bulb.on { background-color: gold; }
    button { margin: 5px; padding: 5px 10px; }
  </style>
</head>
<body>
  <h1>ğŸ”† å…¨é–‹ç‡ˆéŠæˆ² - é»ç‡ˆæ³¡å³é–‹é—œ</h1>
  <div class="bulbs" id="bulbs"></div>
  <button onclick="resetBulbs()">ğŸ”„ é‡è¨­</button>
  <button onclick="randomizeBulbs()">ğŸ² éš¨æ©Ÿç‹€æ…‹</button>
  <button onclick="getSolution()">ğŸ’¡ æç¤ºè§£æ³•</button>
  <p id="status"></p>

  <script>
    const bulbCount = 9;
    let bulbs = Array(bulbCount).fill(0);

    function render() {
      const bulbContainer = document.getElementById("bulbs");
      bulbContainer.innerHTML = "";

      bulbs.forEach((state, i) => {
        const bulb = document.createElement("div");
        bulb.className = "bulb" + (state ? " on" : "");
        bulb.onclick = () => toggle(i); // é»ç‡ˆæ³¡å³é–‹é—œ
        bulbContainer.appendChild(bulb);
      });

      document.getElementById("status").textContent =
        bulbs.every(b => b === 1) ? "ğŸ‰ å…¨éƒ¨äº®äº†ï¼" : "ğŸ’¡ é‚„æ²’å…¨éƒ¨äº®";
    }

    function toggle(index) {
      for (let i = index - 1; i <= index + 1; i++) {
        if (i >= 0 && i < bulbCount) {
          bulbs[i] = 1 - bulbs[i];
        }
      }
      render();
    }

    function resetBulbs() {
      bulbs = Array(bulbCount).fill(0);
      render();
    }

    function randomizeBulbs() {
      bulbs = bulbs.map(() => Math.round(Math.random()));
      render();
    }

    function getSolution() {
      const n = bulbCount;
      let best = null;

      for (let mask = 0; mask < (1 << n); mask++) {
        let testBulbs = [...bulbs];
        let steps = [];

        for (let i = 0; i < n; i++) {
          if ((mask >> i) & 1) {
            steps.push(i + 1);
            for (let j = i - 1; j <= i + 1; j++) {
              if (j >= 0 && j < n) {
                testBulbs[j] = 1 - testBulbs[j];
              }
            }
          }
        }

        if (testBulbs.every(b => b === 1)) {
          if (!best || steps.length < best.length) {
            best = steps;
          }
        }
      }

      const status = document.getElementById("status");
      if (best) {
        status.textContent = "âœ… å»ºè­°é–‹ç‡ˆæ³¡é †åºï¼š" + best.join(", ");
      } else {
        status.textContent = "âŒ æ­¤ç‹€æ…‹ç„¡è§£";
      }
    }

    render();
  </script>
</body>
</html>

